(this["webpackJsonppancake-frontend"]=this["webpackJsonppancake-frontend"]||[]).push([[18],{1147:function(e,t,n){"use strict";n.r(t);var r,a,c,s,o,i,u,l,d,b,p,j,f=n(3),h=n.n(f),x=n(7),O=n(13),m=n(8),g=n(0),v=n(4),w=n(10),y=n.n(w),k=n(68),C=n(183),E=n(109),S=n(36),T=n(22),N=n(5),z=n(398),R=n(76),I=n.n(R),L=n(63),_=n(42),F=n(2),A=n(128),D=n(1),M=(v.e.div(r||(r=Object(m.a)(["\n  background-color: ",";\n  height: 1px;\n  margin: 16px auto;\n  width: 100%;\n"])),(function(e){return e.theme.colors.backgroundDisabled})),Object(v.e)(N.y)(a||(a=Object(m.a)(["\n  border: none;\n  max-width: 70vh;\n  max-height: 70vh;\n  \n  h2 {\n    color: white;\n  }\n  svg {\n    fill: white;\n  }\n\n  "," {\n    min-width: 500px;\n  }\n"])),(function(e){return e.theme.mediaQueries.md}))),J=function(e){var t=e.content,n=e.onDismiss,r=Object(T.b)().t,a=(Object(S.c)().account,Object(A.a)().theme,Object(L.a)()),c=(a.toastError,a.toastSuccess,function(e){var t=e.fee;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(N.fb,{mb:"16px",children:r("This bounty is given as a reward for providing a service to other users.")}),Object(D.jsx)(N.fb,{mb:"16px",children:r("Whenever you successfully claim the bounty, you\u2019re also helping out by activating the Auto CAKE Pool\u2019s compounding function for everyone.")}),Object(D.jsx)(N.fb,{style:{fontWeight:"bold"},children:r("Auto-Compound Bounty: %fee%% of all Auto CAKE pool users pending yield",{fee:t/100})})]})}),s=Object(N.ub)(Object(D.jsx)(c,{fee:11}),{placement:"bottom",tooltipPadding:{right:15}});s.targetRef,s.tooltip,s.tooltipVisible;return Object(D.jsx)(M,{title:r("Learn More"),onDismiss:n,headerBackground:"#910101",children:Object(D.jsx)(N.E,{alignItems:"center",justifyContent:"space-between",children:Object(D.jsx)("div",{style:{color:"black"},dangerouslySetInnerHTML:{__html:t}})})})},K=n(34),P=function(){var e=Object(x.a)(h.a.mark((function e(t,n,r,a,c){var s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.claim(n,r,a,c);case 2:return s=e.sent,e.next=5,s.wait();case 5:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c){return e.apply(this,arguments)}}(),W=function(){var e=Object(K.s)();return{onClaim:Object(g.useCallback)(function(){var t=Object(x.a)(h.a.mark((function t(n,r,a,c){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e,n,r,a,c);case 2:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),[e])}},B=v.e.div(c||(c=Object(m.a)(["\n  background-color: #910101;\n"]))),Q=Object(v.e)(N.n)(s||(s=Object(m.a)(["\n  border-radius: 10px;\n  width: 100%;\n  z-index: 1;\n  box-shadow: none;\n  padding: 30px;\n"]))),q=Object(v.e)(C.a)(o||(o=Object(m.a)(["\n  width: 85vh;\n\n  @media only screen and (min-width: 350px) and (max-width: 991px) {\n    width: 100%;\n  }\n"]))),H=Object(v.e)(N.K)(i||(i=Object(m.a)(["\n  background-color: #f6f6f6;\n  border: none;\n  color: #0d0d0d;\n  padding: 5px 12px;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  font-size: 16px;\n  margin: 5px;\n  width: 85%;\n  border: 1px;\n  border-radius: 5px;\n  position: relative;\n  margin-top: 15px;\n\n  &:focus {\n    box-shadow: 0px 0px 0px 1px #910101, 0px 0px 0px 4px rgb(145 1 1) !important;\n  }\n"]))),U=v.e.i(u||(u=Object(m.a)(["\n  padding-top: 8px;\n  font-size: 30px;\n"]))),V=v.e.div(l||(l=Object(m.a)(["\n  padding-top: 20px;\n"]))),Y=Object(v.e)(N.k)(d||(d=Object(m.a)(["\n  font-style: normal;\n  font-weight: bold;\n  font-size: 20px;\n  line-height: 47px;\n  text-align: center;\n  text-transform: uppercase;\n  border-radius: 5px;\n  padding: 30px;\n  width: 200px;\n  height: 40px;\n  background-color: #910101;\n"]))),G=Object(v.e)(N.k)(b||(b=Object(m.a)(["\n  background-color: #910101;\n  border-radius: 5px;\n  font-size: 25px;\n  max-width: 200px;\n  text-transform: uppercase;\n"]))),X=Object(v.e)(N.E)(p||(p=Object(m.a)(["\n  text-align: center;\n  word-break: break-word;\n"]))),Z=Object(v.e)(N.fb)(j||(j=Object(m.a)(["\n  color: #910101;\n  font-size: 18px;\n  font-weight: bold;\n\n  "," {\n    font-size: 18px;\n  }\n  &:hover {\n    cursor: pointer;\n  }\n"])),(function(e){return e.theme.mediaQueries.md}));t.default=Object(k.i)((function(e){var t,n,r,a=e.match.params.address,c=Object(T.b)(),s=c.t,o=c.currentLanguage,i=Object(S.c)(),u=i.account,l=i.library,d="".concat("http://localhost:3000/referral/").concat(u),b=Object(g.useState)(!1),p=Object(O.a)(b,2),j=p[0],f=p[1],m=Object(g.useState)(!1),v=Object(O.a)(m,2),w=v[0],k=v[1],C=Object(_.a)().fastRefresh,R=Object(L.a)(),A=R.toastSuccess,M=R.toastError,K="".concat("https://musashi-bo.ippcoin.com","/api/referral/get-referral-code"),P=Object(g.useState)(!1),$=Object(O.a)(P,2),ee=$[0],te=$[1],ne=Object(g.useState)(!1),re=Object(O.a)(ne,2),ae=re[0],ce=re[1],se=Object(g.useState)(new y.a("0")),oe=Object(O.a)(se,2),ie=oe[0],ue=oe[1],le=(t=u,{onStakingReward:Object(g.useCallback)(Object(x.a)(h.a.mark((function e(){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat("https://musashi-bo.ippcoin.com","/api/reward/get-staking-reward"),e.next=4,I.a.get(n,{params:{address:t}});case 4:return r=e.sent,e.next=7,null===r||void 0===r?void 0:r.data;case 7:return a=e.sent,c=a.data,e.abrupt("return",c);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",{});case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[t])}).onStakingReward,de=W().onClaim,be=(n="referral",r=o.locale,{onCmsContent:Object(g.useCallback)(Object(x.a)(h.a.mark((function e(){var t,a,c,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat("https://musashi-bo.ippcoin.com","/api/frontend/get-content"),e.next=4,I.a.get(t,{params:{page:n,language:r}});case 4:return a=e.sent,e.next=7,null===a||void 0===a?void 0:a.data;case 7:return c=e.sent,s=c.data,e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",{});case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),[r,n])}).onCmsContent,pe=Object(g.useState)((function(){return{referral:{content:"",language:"",page:"",key:""}}})),je=Object(O.a)(pe,2),fe=je[0],he=je[1],xe=Object(N.tb)(Object(D.jsx)(J,{content:fe.referral.content})),Oe=Object(O.a)(xe,1)[0];Object(g.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be();case 2:t=e.sent,Object.keys(t).length>0&&he(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[be]),Object(g.useEffect)((function(){u&&function(){var e=Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le();case 2:t=e.sent,!1===(n=t&&Object.keys(t).length>0?new y.a(t.amount.toString()):new y.a("0")).isNaN()&&ue(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[le,C,u]);var me=function(){var e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,I.a.post(K,{address:u,ref_address:a}).then((function(e){if(e){var t=e.data;t.error&&(k(!1),M(s("Error"),s(t.message)));var n=t.data;n.is_update?(k(!1),M(s("Error"),s("Update is prohibited. Please contract support if want to change referral address"))):n.address&&n.ref_address&&(k(!1),A(s("Success"),s("Referral set successfully."))),setTimeout((function(){window.location.replace("/referral")}),1e3)}})).catch((function(e){}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),M(s("Error"),s("Please try again.")),k(!1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,r,a,c,o=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"referral",te(!0),ce(!0),e.prev=3,n={address:u,action:t},e.next=7,l.getSigner();case 7:return r=e.sent,a="",e.next=11,r.signMessage(JSON.stringify(n)).then((function(e){a=e}));case 11:return c="".concat("https://mus-api.ippcoin.com/api/","claim/").concat(u,"/").concat(a),e.next=14,I.a.get(c).then(function(){var e=Object(x.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}if(n=t.data,r=n.data,"OK"===n.msg){e.next=9;break}M(s("Error"),n.msg),te(!1),ce(!1),e.next=14;break;case 9:return e.next=11,de(r.amount,r.from_block,r.to_block,r.signature);case 11:A("".concat(s("Claim"),"!"),s("Claim reward successfully!")),te(!1),ce(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(3),M(s("Error"),s("Reward has been claimed or make sure you are paying enough gas!")),te(!1),ce(!1);case 21:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}();return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(B,{children:[Object(D.jsx)("h1",{className:"page-red-header hide-ifMobile",children:s("Referral")}),Object(D.jsx)(q,{children:Object(D.jsx)(Q,{children:u?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(N.E,{justifyContent:"center",children:Object(D.jsx)("h5",{className:"red",children:s("Your Referral Link")})}),Object(D.jsxs)(N.E,{alignItems:"center",justifyContent:"center",children:[Object(D.jsx)(H,{type:"text",scale:"md",value:d,readOnly:!0}),Object(D.jsx)(z.CopyToClipboard,{text:d,onCopy:function(){f(!0),setTimeout((function(){f(!1)}),1e3)},children:Object(D.jsx)("span",{children:j?s("Copied!"):Object(D.jsx)(U,{className:"bx bxs-copy"})})})]}),a?Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(V,{children:[Object(D.jsx)(X,{justifyContent:"center",children:Object(D.jsxs)("span",{className:"red",children:[s("Welcome to Musashi, you're referred by "),a]})}),Object(D.jsx)("div",{style:{paddingTop:"20px"}}),Object(D.jsx)(N.E,{alignItems:"center",justifyContent:"center",children:Object(D.jsx)(Y,{isLoading:w,endIcon:w?Object(D.jsx)(N.f,{spin:!0,color:"currentColor"}):null,onClick:me,disabled:!a,children:s(w?"Confirming":"Join Now")})})]})}):null,Object(D.jsx)(N.E,{justifyContent:"center",alignItems:"center",children:Object(D.jsx)(Z,{bold:!0,color:"textSubtle",mt:"6px",style:{textDecoration:"underline"},onClick:Oe,children:s("Learn more")})}),Object(D.jsxs)(N.E,{justifyContent:"center",alignItems:"center",marginTop:"2rem",flexDirection:"column",children:[Object(D.jsx)("h5",{className:"red",children:s("Claim %token% Token",{token:F.k.musashi.symbol})}),Object(D.jsxs)(N.fb,{fontSize:"25px",children:[ie.toFixed(4)," ",F.k.musashi.symbol]}),u?Object(D.jsx)(G,{mt:"1rem",width:"100%",disabled:ee||ie.isLessThanOrEqualTo(new y.a("0")),onClick:function(){ge()},children:s(ae?"Confirming":"Claim")}):Object(D.jsx)(E.a,{mt:"1rem",width:"100%"})]})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(N.E,{justifyContent:"center",children:Object(D.jsx)("h5",{children:s("Connect wallet to get your referral link")})}),Object(D.jsx)(N.E,{justifyContent:"center",children:Object(D.jsx)(E.a,{})})]})})})]})})}))}}]);
//# sourceMappingURL=18.e96e4c4f.chunk.js.map